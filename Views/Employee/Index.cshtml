@model IEnumerable<GestionDesEmployees.Models.Employee>

@{
    ViewData["Title"] = "Index";
}

<h1>Employees</h1>

<p>
    <a asp-action="Create">Add</a>
</p>

<div id="grid"></div>

<script>
    $(document).ready(function () {
        $("#grid").kendoGrid({
            dataSource: {
                data: @Html.Raw(Json.Serialize(Model)),
                pageSize: 10
            },
            sortable: true,
            pageable: true,
            columns: [
                {
                    field: "_name",
                    title: "Name"
                },
                {
                    field: "_email",
                    title: "Email"
                },
                {
                    field: "_phone",
                    title: "Phone"
                },
                {
                    field: "_city",
                    title: "City"
                },
                {
                    command: [
                        { name: "edit", text: "Edit" },
                        {
                            name: "details",
                            text: "Details",
                            click: function (e) {
                                var tr = $(e.target).closest("tr");
                                var dataItem = this.dataItem(tr);

                                window.location.href = '/Employee/Details/' + dataItem.EmployeeId;
                            }
                        },
                        { name: "destroy", text: "Delete" }
                    ],
                    title: "&nbsp;",
                    width: "250px"
                }
            ],
            editable: "popup",
            edit: function (e) {

            },
            save: function (e) {

            },
            remove: function (e) {
                
            }
        });
    });
</script>

